<div class="grid-row">
  <div class="column-full">
    <div id="user-status">
      <p>
        <%= t(".user_info.signed_in_user", email: current_user.email) %>
        <%= link_to t(".user_info.change_password_link"), url_to_change_password %>
        <%= link_to t(".user_info.sign_out_link"), destroy_user_session_path %>
      </p>
    </div>
  </div>
</div>

<div class="grid-row">
  <div class="column-full">
    <h1 class="heading-large">
      <%= t(".heading") %>
    </h1>
  </div>
</div>

<div class="grid-row">
  <div class="column-full">
    <p><%= t(".summary.paragraph_1") %></p>
    <p><%= t(".summary.paragraph_2") %></p>
    <ul class="list list-bullet">
      <% t(".summary.list").each do |list_item| %>
        <li><%= list_item %></li>
      <% end %>
    </ul>
    <p><%= t(".summary.paragraph_3") %></p>
    <p><%= t(".summary.paragraph_4", count: @registrations.count) %></p>
  </div>
</div>

<% if @registrations.present? %>
  <% @registrations.each do |registration| %>
    <div class="grid-row registration-list">
      <div class="column-one-quarter">
        <ul class="registration-details">
          <li>
            <span><%= t(".results.labels.company_name") %></span>
            <%= registration.company_name %>
          </li>
          <% if registration.registered_address.present? %>
          <li>
            <span><%= t(".results.labels.registered_address_postcode") %></span>
            <%= registration.registered_address.postcode %>
          </li>
          <% end %>
        </ul>
      </div>
      <div class="column-one-quarter">
        <ul class="registration-details">
          <li>
            <span><%= t(".results.labels.reg_identifier") %></span>
            <%= registration.reg_identifier %>
          </li>
          <li>
            <span><%= t(".results.labels.status") %></span>
            <%= registration.metaData.status.titleize %>
          </li>
        </ul>
      </div>
      <div class="column-one-quarter">
        <ul class="registration-details">
          <% if registration.metaData.date_registered.present? %>
          <li>
            <span><%= t(".results.labels.date_registered") %></span>
            <%= registration.metaData.date_registered.to_date %>
          </li>
          <% end %>
          <% if registration.expires_on.present? %>
          <li>
            <span><%= t(".results.labels.expires_on") %></span>
            <%= registration.expires_on.to_date %>
          </li>
          <% end %>
        </ul>
      </div>
      <div class="column-one-quarter">
        <span><%= t(".results.labels.actions") %></span>
        <ul>
          <% if display_view_certificate_link_for?(registration) %>
            <li>
              <%= link_to t(".results.actions.view_certificate"),
                          url_to_view_certificate_for(registration) %>
            </li>
          <% end %>
          <% if display_edit_link_for?(registration) %>
            <li>
              <%= link_to t(".results.actions.edit"),
                          url_to_edit(registration) %>
            </li>
          <% end %>
          <% if display_renew_link_for?(registration) %>
            <li>
              <%= link_to t(".results.actions.renew"),
                          url_to_renew(registration) %>
            </li>
          <% end %>
          <% if display_order_cards_link_for?(registration) %>
            <li>
              <%= link_to t(".results.actions.order_cards"),
                          url_to_order_cards_for(registration) %>
            </li>
          <% end %>
          <% if display_delete_link_for?(registration) %>
            <li>
              <%= link_to t(".results.actions.delete"),
                          url_to_delete(registration) %>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
  <% end %>

  <div class="grid-row">
    <div class="column-full">
      <nav role="navigation" class="pagination" aria-label="Pagination">
        <div class="pagination__summary">
          <%= page_entries_info @registrations, entry_name: "item" %>
        </div>
        <%= paginate @registrations %>
      </nav>
    </div>
  </div>
<% else %>
  <p><%= t(".results.no_results") %></p>
<% end %>

<div class="grid-row">
  <div class="column-full">
    <%= link_to t(".new_registration_button"),
                url_for_new_registration,
                class: "button" %>
  </div>
</div>
